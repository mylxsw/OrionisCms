<?xml version="1.0" encoding="UTF-8" standalone="no"?><templates><template autoinsert="true" context="java" deleted="false" description="OrionisCMS Controller" enabled="true" name="cms_controller">import javax.annotation.Resource;&#13;
import javax.servlet.http.HttpServletRequest;&#13;
import javax.servlet.http.HttpServletResponse;&#13;
import javax.servlet.http.HttpSession;&#13;
import javax.validation.Valid;&#13;
&#13;
import org.springframework.stereotype.Controller;&#13;
import org.springframework.ui.Model;&#13;
import org.springframework.validation.BindingResult;&#13;
import org.springframework.web.bind.annotation.ModelAttribute;&#13;
import org.springframework.web.bind.annotation.RequestMapping;&#13;
import org.springframework.web.bind.annotation.RequestParam;&#13;
&#13;
import name.orionis.cms.core.base.BaseController;&#13;
import name.orionis.cms.core.rbac.authentication.UserInfo;&#13;
import name.orionis.cms.core.rbac.web.AccountController;&#13;
import name.orionis.helper.reflection.annotation.Remark;&#13;
&#13;
@Remark(value="${entity2}" ,group="${entity}")&#13;
@RequestMapping("${entity}")&#13;
@Controller&#13;
public class ${entity2}Controller extends BaseController {&#13;
&#13;
	@Resource&#13;
	private ${entity2}Service ${entity}Service;&#13;
	&#13;
	@Remark(value="${entity2} List" , group="${entity}")&#13;
	@RequestMapping("list")&#13;
	public String list(HttpServletRequest req, &#13;
			HttpServletResponse resp,&#13;
			Model model){&#13;
		model.addAttribute("${entity}", &#13;
				${entity}Service.findAll${entity2}s());&#13;
		return view("list");&#13;
	}&#13;
	&#13;
	@Remark(value="${entity2} Add", group="${entity}")&#13;
	@RequestMapping("add")&#13;
	public String add( @Valid @ModelAttribute ${entity2}Form ${entity}Form,&#13;
			BindingResult result, &#13;
			HttpServletRequest req, &#13;
			HttpServletResponse resp, &#13;
			HttpSession session,&#13;
			Model model){&#13;
		&#13;
		UserInfo user = (UserInfo) session.getAttribute(AccountController.ACCOUNT_INFO);&#13;
		&#13;
		if(HTTP_GET.equals(req.getMethod())){&#13;
			return view("add");&#13;
		}&#13;
		// Check Form Information&#13;
		if(result.hasErrors() || !${entity}Form.validate()){&#13;
			return errors(result, ${entity}Form, resp);&#13;
		}&#13;
		${entity2} entity = ${entity}Form.toEntity();&#13;
		&#13;
		${entity}Service.save${entity2}(entity);&#13;
		&#13;
		return success(resp);&#13;
	}&#13;
	&#13;
	@Remark(value="${entity2} Edit", group="${entity}")&#13;
	@RequestMapping("edit")&#13;
	public String edit( @Valid @ModelAttribute ${entity2}Form ${entity}Form,&#13;
			BindingResult result, &#13;
			HttpSession session,&#13;
			HttpServletRequest req, &#13;
			HttpServletResponse resp, Model model){&#13;
		UserInfo user = (UserInfo) session.getAttribute(AccountController.ACCOUNT_INFO);&#13;
		&#13;
		long id = Long.parseLong(req.getParameter("id"));&#13;
		if(HTTP_GET.equals(req.getMethod())){&#13;
			model.addAttribute("${entity}",${entity}Service.find${entity2}(id));&#13;
			return view("edit");&#13;
		}&#13;
		// Check Form Information&#13;
		if(result.hasErrors() || !${entity}Form.validate()){&#13;
			return errors(result, ${entity}Form, resp);&#13;
		}&#13;
		${entity2} entity = ${entity}Form.toEntity();&#13;
		entity.setId(id);&#13;
		${entity}Service.update${entity2}(entity);&#13;
		&#13;
		return success(resp);&#13;
	}&#13;
	&#13;
	@Remark(value="${entity2} delete",group="${entity}")&#13;
	@RequestMapping("delete")&#13;
	public String delete(@RequestParam("id") long id, HttpServletRequest req, &#13;
			HttpServletResponse resp){&#13;
		${entity}Service.delete${entity2}(${entity}Service.find${entity2}(id));&#13;
		return success(resp);&#13;
	}&#13;
	&#13;
	&#13;
	&#13;
	@Override&#13;
	protected String _viewBase() {&#13;
		return "extensions/${entity}/";&#13;
	}&#13;
&#13;
}&#13;
</template></templates>